; BIND reverse data file for empty rfc1918 zone
;
; DO NOT EDIT THIS FILE - it is used for multiple zones.
; Instead, copy it, edit named.conf, and use that copy.
;
$TTL	86400
@		IN	SOA	{{ hostname }}.{{ dns_domain }}. 	contact@{{ dns_domain }}. (
			      1			; Serial
			 604800			; Refresh
			  86400			; Retry
			2419200			; Expire
			  86400 )		; Negative Cache TTL
;

@		IN	NS	{{ hostname }}.{{ dns_domain }}.

@		IN	A {{ (hostvars.values() | selectattr('dns_root', 'defined') | selectattr('dns_root', 'eq', true) | first).inventory_hostname }}

*		IN	A {{ (hostvars.values() | selectattr('dns_proxy', 'defined') | selectattr('dns_proxy', 'eq', true) | first).inventory_hostname }}
www		IN	A {{ (hostvars.values() | selectattr('dns_www', 'defined') | selectattr('dns_www', 'eq', true) | first).inventory_hostname }}

{{ hostname }}	IN	A	{{ ansible_host }}
{% for host in groups.all %}
{% if hostvars[host].hostname is defined %}
{{ hostvars[host].hostname }}		IN	A	{{ host }}
{% endif %}
{% endfor %}
